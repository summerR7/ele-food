<template>
  <div id="ele-home">
    <!-- 头部 -->
    <header class="home-header">
      <div class="location">
        <span class="icon local">&#xe62e;</span>
        <h3>力宝大厦北区力宝大厦北区</h3>
        <span class="icon down">&#xe600;</span>
      </div>

      <div class="search">
        <span class="icon">&#xe653;</span>
        <span class="placeholder">搜索鹅了么商家、商品名称</span>
      </div>
    </header>

    <!-- 轮播分类 -->
    <div class="swiper-container category">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <ul class="cate-list">
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/7/d8/a867c870b22bc74c87c348b75528djpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="美食">
              <span>美食</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/e/89/185f7259ebda19e16123884a60ef2jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="晚餐">
              <span>晚餐</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/c/7e/76a23eb90dada42528bc41499d6f8jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="商超便利">
              <span>商超便利</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/0/d0/dd7c960f08cdc756b1d3ad54978fdjpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="水果">
              <span>水果</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/7/0a/af108e256ebc9f02db599592ae655jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="医药健康">
              <span>医药健康</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/3/01/c888acb2c8ba9e0c813f36ec9e90ajpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="浪漫鲜花">
              <span>浪漫鲜花</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/e/58/bceb19258e3264e64fb856722c3c1jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="跑腿代购">
              <span>跑腿代购</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/b/7f/432619fb21a40b05cd25d11eca02djpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="汉堡披萨">
              <span>汉堡披萨</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/c/21/e42997b86b232161a5a16ab813ae8jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="厨房生鲜">
              <span>厨房生鲜</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/a/78/0fb469b2da210827ec16896e00420jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="炸鸡炸串">
              <span>炸鸡炸串</span>
            </li>
          </ul>
        </div>
        <div class="swiper-slide">
          <ul class="cate-list">
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/a/8a/ec21096d528b7cfd23cdd894f01c6jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="地方菜系">
              <span>地方菜系</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/e/c7/b7ba9547aa700bd20d0420e1794a8jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="麻辣烫">
              <span>麻辣烫</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/0/1a/314b6da88ab6c7ae9828f91652d40jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="速食简餐">
              <span>速食简餐</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/7/d6/6f2631288a44ec177204e05cbcb93jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="地方小吃">
              <span>地方小吃</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/a/7b/b02bd836411c016935d258b300cfejpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="大牌惠吃">
              <span>大牌惠吃</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/e/89/185f7259ebda19e16123884a60ef2jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="米粉面馆">
              <span>米粉面馆</span>
            </li>
            <li class="cate-item">
              <img src="https://fuss10.elemecdn.com/5/1a/dc885d2ce022d2ee60495acafb795jpeg.jpeg?imageMogr/format/webp/thumbnail/!90x90r/gravity/Center/crop/90x90/" alt="包子粥店">
              <span>包子粥店</span>
            </li>
          </ul>
        </div>
      </div>
      <!-- 如果需要分页器 -->
      <div class="swiper-pagination cate-page"></div>
    </div>

    <!-- 内容 -->
    <div class="content">
      <!-- 超级会员 -->
      <div class="svip">
        <div class="text">
          <span class="icon">&#xe63e;</span><span class="theme">超级会员</span><span class="sub"> · 每月领20元红包</span>
        </div>
        <a class="link" href="#">立即开通<span class="icon">&#xe626;</span></a>
      </div>

      <!-- 品质套餐 -->
      <div class="set-meal">
        <div class="text">
          <h3>品质套餐</h3>
          <p>搭配齐全吃得好</p>
          <a href="#">立即抢购 &gt;</a>
        </div>
        <img src="https://fuss10.elemecdn.com/e/ee/df43e7e53f6e1346c3fda0609f1d3png.png?imageMogr/format/webp/thumbnail/!282x188r/gravity/Center/crop/282x188/" alt="套餐">
      </div>

      <!-- 广告 -->
      <div class="swiper-container banner">
        <div class="swiper-wrapper">
            <div class="swiper-slide" v-for="item in banners" :key="item.id">
              <img class="banner-pic" :src="item.imageUrl" :alt="item.title">
            </div>
        </div>
        <!-- 如果需要分页器 -->
        <div class="swiper-pagination banner-page"></div>
      </div>
    </div>

  </div>
</template>

<script>
import 'swiper/dist/css/swiper.min.css'
import Swiper from 'swiper'
const SESSION_STORAGE_KEY = 'ele-home-banner'

export default {
  name: 'Home',
  data () {
    return {
      banners: []
    }
  },
  computed: {
    hasBannerLoaded () {
      return this.banners.length > 0
    }
  },
  created () {
    const swiper = JSON.parse(window.sessionStorage.getItem(SESSION_STORAGE_KEY))
    if (swiper) {
      this.swiper = swiper
      return
    }

    this.$http.getBanners()
      .then(res => {
        this.banners = res.data.data.banners
        this.$nextTick()
          .then(this.initSwiper)
      })
  },
  mounted () {

  },
  methods: {
    initSwiper () {
      this.myCateSwiper = new Swiper('.category', {
        loop: true, // 循环模式选项
        pagination: { // 分页器
          el: '.cate-page'
        }
      })

      this.myBannerSwiper = new Swiper('.banner', {
        loop: true, // 循环模式选项
        pagination: { // 分页器
          el: '.banner-page'
        }
      })
    }
  }
}
</script>

<style>
  .swiper-pagination-bullet {
    border-radius: 0;
    height: 0.4vw;
  }
  .swiper-pagination-bullet-active {
    background: #00a6ff;
  }
</style>

<style lang='scss' scoped>
  #ele-home {
    height: 100%;
    display: flex;
    flex-direction: column;

    .home-header {
      height: 26.7vw;
      padding: 0 3.7vw;
      background-image: linear-gradient(90deg,#0af,#0085ff);

      .location {
        height: 13.3vw;
        color: #fff;
        display: flex;
        align-items: center;

        h3 {
          max-width: 50%;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          margin: 0 1.3vw;
          font-weight: 300;
        }

        .icon {
          font-family: 'iconfont';
        }
      }

      .search {
        height: 9.6vw;
        margin: 1.9vw 0;
        background-color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3.7vw;
        color: #999;
        font-weight: 300;

        .icon {
          font-family: 'iconfont';
          margin-right: 2vw;
        }
      }
    }

    .category {
      width: 100%;
      height: 47.2vw;

      .cate-list {
        width: 100%;
        height: 100%;
        padding: 3.7vw 0;
        box-sizing: border-box;

        .cate-item {
          float: left;
          width: 20%;
          height: 17vw;
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-bottom: 3.7vw;

          img {
            display: block;
            width: 12vw;
            height: 12vw;
            margin-bottom: 1vw;
          }

          span {
            display: block;
            height: 4vw;
            font-size: 3.2vw;
            color: #666;
          }
        }
      }
    }

    .content {
      flex: 1;
      padding: 1.5vw 2.7vw;
      box-sizing: border-box;

      &>div {
        margin-bottom: 2vw;
      }

      .svip {
        height: 10.7vw;
        background-image: linear-gradient(90deg,#ffefc4,#f3dda0);
        border-radius: 0.5vw;
        padding: 0 3.7vw;
        box-sizing: border-box;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: #644f1b;

        .icon {
          font-family: 'iconfont';
        }

        .text {
          font-size: 3.7vw;
          display: flex;
          align-items: center;

          .icon {
            font-size: 5.7vw;
            color: #c7ac67;
          }

          .theme {
            font-weight: 500;
            margin: 0 2vw;
          }

          .sub {
            font-size: 3.2vw;
          }
        }

        .link {
          font-size: 3.2vw;
          color: #644f1b;
        }
      }

      .set-meal {
        height: 29.3vw;
        padding: 3.7vw 3.7vw 0;
        box-sizing: border-box;
        border-radius: 0.5vw;
        background: linear-gradient(0deg,#f4f4f4 5%,#fafafa 95%);
        display: flex;
        justify-content: space-between;

        .text {
          h3 {
            font-size: 4.5vw;
            font-weight: 700;
            color: #333;
            margin-bottom: 2.3vw;
          }

          p {
            font-size: 3.5vw;
            font-weight: 300;
            color: #777;
            margin-bottom: 2.3vw;
          }

          a {
            font-size: 3.2vw;
            color: #af8260;
          }
        }

        img {
          width: 37.6vw;
          height: 25.1vw;
        }
      }

      .banner {
        width: 100%;
        height: 37.3vw;

        .banner-pic {
          width: 100%;
          height: 37.3vw;
        }
      }
    }
  }
</style>
